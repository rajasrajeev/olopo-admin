"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[432],{432:(t,e,a)=>{a.r(e),a.d(e,{default:()=>d});const n={name:"CategoryDetail",props:{categoryId:{type:[String,Number],required:!0}},data:function(){return{category:{id:null,name:"",description:"",icon_image:"",contents:[]},addContentData:{title:"",description:"",content_type:"",image:null,video_url:"",sort_order:0},deleteContentData:{id:null},addContentModal:!1,deleteContentDialog:!1}},methods:{created:function(){this.$route&&this.$route.query.categoryId&&(this.$emit("update:categoryId",this.$route.query.categoryId),console.log("Category ID from route:",this.$route.query.categoryId))},getCategoryDetail:function(){var t=this,e=this.block("contentLoading");this.axios.get("/api/v1/category/".concat(this.categoryId)).then((function(a){t.category=a.data.data,e.close()})).catch((function(a){var n,o;console.log(null===(n=a.response)||void 0===n?void 0:n.data),t.errorNotification((null===(o=a.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)||"Failed to load category details"),e.close()}))},addContent:function(){var t=this,e=this.block("addContentForm"),a=new FormData;a.append("category_id",this.category.id),a.append("title",this.addContentData.title),a.append("description",this.addContentData.description),a.append("content_type",this.addContentData.content_type),a.append("sort_order",this.addContentData.sort_order||0),"image"===this.addContentData.content_type&&this.addContentData.image?a.append("image",this.addContentData.image):"video"===this.addContentData.content_type&&a.append("video_url",this.addContentData.video_url),this.axios.post("/api/v1/add/category/content",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){!0===a.data.status?(t.$refs.resetContentForm.reset(),t.addContentData={title:"",description:"",content_type:"",image:null,video_url:"",sort_order:0},t.addContentModal=!1,t.successNotification(a.data.message),t.getCategoryDetail()):t.errorNotification(a.data.message),e.close()})).catch((function(a){var n;t.errorNotification((null===(n=a.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||"Failed to add content"),e.close()}))},deleteContent:function(){var t=this,e=this.block("deleteLoading");this.axios.delete("/api/v1/delete/category/content/"+this.deleteContentData.id).then((function(a){!0===a.data.status?(t.deleteContentDialog=!1,t.successNotification(a.data.message),t.getCategoryDetail()):t.errorNotification(a.data.message),e.close()})).catch((function(a){var n;t.deleteContentDialog=!1,t.errorNotification((null===(n=a.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||"Failed to delete content"),e.close()}))},deleteContentBtn:function(t){this.deleteContentDialog=!0,this.deleteContentData.id=t},handleImageUpload:function(t){var e=t.target.files[0];e&&(this.addContentData.image=e)},resetContentFields:function(){this.addContentData.image=null,this.addContentData.video_url=""},formatDate:function(t){var e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()}},mounted:function(){this.created(),this.getCategoryDetail()}};var o=a(5072),s=a.n(o),i=a(5768),r={insert:"head",singleton:!1};s()(i.A,r);i.A.locals;const d=(0,a(4486).A)(n,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"header bg-primary pb-6"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"header-body"},[e("div",{staticClass:"row align-items-center py-4"},[e("div",{staticClass:"col-lg-8 col-7"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb breadcrumb-links breadcrumb-dark"},[t._m(0),t._v(" "),e("li",{staticClass:"breadcrumb-item active text-white",attrs:{"aria-current":"page"}},[t._v("\n                                    "+t._s(t.category.name)+"\n                                ")])])]),t._v(" "),e("div",{staticClass:"d-flex align-items-center"},[e("img",{staticClass:"avatar avatar-lg rounded-circle mr-3",staticStyle:{width:"60px",height:"60px","object-fit":"cover"},attrs:{src:t.category.icon_image,alt:t.category.name}}),t._v(" "),e("div",[e("h6",{staticClass:"h2 text-white d-inline-block mb-0"},[t._v(t._s(t.category.name))]),t._v(" "),e("p",{staticClass:"text-white-50 mb-0"},[t._v(t._s(t.category.description))])])])]),t._v(" "),e("div",{staticClass:"col-lg-4 col-5 text-right"},[e("a",{staticClass:"btn btn-sm btn-neutral",attrs:{href:"#"},on:{click:function(e){t.addContentModal=!t.addContentModal}}},[t._v("Add Content")])])])])])]),t._v(" "),e("div",{staticClass:"container-fluid mt--6"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"card",attrs:{id:"deleteLoading"}},[t._m(1),t._v(" "),e("div",{staticClass:"card-body",attrs:{id:"contentLoading"}},[t.category.contents&&t.category.contents.length>0?e("div",{staticClass:"row"},t._l(t.category.contents,(function(a){return e("div",{key:a.id,staticClass:"col-lg-4 col-md-6 mb-4"},[e("div",{staticClass:"card shadow h-100"},[e("div",{staticClass:"card-img-top position-relative",staticStyle:{height:"200px",overflow:"hidden"}},["image"===a.content_type?e("img",{staticClass:"w-100 h-100",staticStyle:{"object-fit":"cover"},attrs:{src:a.image_url,alt:a.title}}):"video"===a.content_type?e("div",{staticClass:"d-flex align-items-center justify-content-center bg-dark h-100"},[t._m(2,!0)]):t._e(),t._v(" "),e("span",{staticClass:"badge position-absolute",class:"video"===a.content_type?"badge-danger":"badge-success",staticStyle:{top:"10px",right:"10px"}},[e("i",{class:"video"===a.content_type?"fas fa-video":"fas fa-image"}),t._v("\n                                            "+t._s(a.content_type.toUpperCase())+"\n                                        ")])]),t._v(" "),e("div",{staticClass:"card-body d-flex flex-column"},[e("h5",{staticClass:"card-title"},[t._v(t._s(a.title))]),t._v(" "),e("p",{staticClass:"card-text text-muted flex-grow-1"},[t._v("\n                                            "+t._s(a.description||"No description available")+"\n                                        ")]),t._v(" "),"video"===a.content_type&&a.video_url?e("div",{staticClass:"mb-3"},[e("a",{staticClass:"btn btn-outline-primary btn-sm",attrs:{href:a.video_url,target:"_blank"}},[e("i",{staticClass:"fas fa-external-link-alt"}),t._v(" Watch Video\n                                            ")])]):t._e(),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-center mt-auto"},[e("small",{staticClass:"text-muted"},[t._v(t._s(t.formatDate(a.created_at)))]),t._v(" "),e("div",[e("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(e){return t.deleteContentBtn(a.id)}}},[e("i",{staticClass:"fas fa-trash-alt"})])])])])])])})),0):e("div",{staticClass:"text-center py-5"},[e("i",{staticClass:"fas fa-folder-open fa-3x text-muted mb-3"}),t._v(" "),e("h4",{staticClass:"text-muted"},[t._v("No Content Available")]),t._v(" "),e("p",{staticClass:"text-muted"},[t._v("Start by adding some content to this category.")]),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:function(e){t.addContentModal=!0}}},[e("i",{staticClass:"fas fa-plus"}),t._v(" Add First Content\n                            ")])])])])])])]),t._v(" "),e("vs-dialog",{attrs:{"prevent-close":"",blur:"",width:"600px"},scopedSlots:t._u([{key:"header",fn:function(){return[e("h4",{staticClass:"not-margin"},[t._v("\n                Add Content to "),e("b",[t._v(t._s(t.category.name))])])]},proxy:!0}]),model:{value:t.addContentModal,callback:function(e){t.addContentModal=e},expression:"addContentModal"}},[t._v(" "),e("form",{ref:"resetContentForm",attrs:{id:"addContentForm"},on:{submit:function(e){return e.preventDefault(),t.addContent()}}},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-control-label"},[t._v("Content Title")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addContentData.title,expression:"addContentData.title"}],staticClass:"form-control",attrs:{placeholder:"Content Title",required:""},domProps:{value:t.addContentData.title},on:{input:function(e){e.target.composing||t.$set(t.addContentData,"title",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group mt--3"},[e("label",{staticClass:"form-control-label"},[t._v("Description")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.addContentData.description,expression:"addContentData.description"}],staticClass:"form-control",attrs:{placeholder:"Content Description",rows:"3"},domProps:{value:t.addContentData.description},on:{input:function(e){e.target.composing||t.$set(t.addContentData,"description",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group mt--3"},[e("label",{staticClass:"form-control-label"},[t._v("Content Type")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.addContentData.content_type,expression:"addContentData.content_type"}],staticClass:"form-control",attrs:{required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.addContentData,"content_type",e.target.multiple?a:a[0])},t.resetContentFields]}},[e("option",{attrs:{value:""}},[t._v("Select Content Type")]),t._v(" "),e("option",{attrs:{value:"image"}},[t._v("Image")]),t._v(" "),e("option",{attrs:{value:"video"}},[t._v("Video")])])]),t._v(" "),"image"===t.addContentData.content_type?e("div",{staticClass:"form-group mt--3"},[e("label",{staticClass:"form-control-label"},[t._v("Upload Image")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{type:"file",accept:"image/*",required:""},on:{change:t.handleImageUpload}}),t._v(" "),e("small",{staticClass:"text-muted"},[t._v("Supported formats: JPG, PNG, GIF (Max: 2MB)")])]):t._e(),t._v(" "),"video"===t.addContentData.content_type?e("div",{staticClass:"form-group mt--3"},[e("label",{staticClass:"form-control-label"},[t._v("Video URL")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addContentData.video_url,expression:"addContentData.video_url"}],staticClass:"form-control",attrs:{type:"url",placeholder:"https://example.com/video.mp4",required:""},domProps:{value:t.addContentData.video_url},on:{input:function(e){e.target.composing||t.$set(t.addContentData,"video_url",e.target.value)}}}),t._v(" "),e("small",{staticClass:"text-muted"},[t._v("Enter a valid video URL (YouTube, Vimeo, direct video link, etc.)")])]):t._e(),t._v(" "),e("div",{staticClass:"form-group mt--3"},[e("label",{staticClass:"form-control-label"},[t._v("Sort Order")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addContentData.sort_order,expression:"addContentData.sort_order"}],staticClass:"form-control",attrs:{type:"number",placeholder:"0",min:"0"},domProps:{value:t.addContentData.sort_order},on:{input:function(e){e.target.composing||t.$set(t.addContentData,"sort_order",e.target.value)}}}),t._v(" "),e("small",{staticClass:"text-muted"},[t._v("Lower numbers appear first")])]),t._v(" "),e("div",{staticClass:"footer-dialog text-center"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Add Content")])])])]),t._v(" "),e("vs-dialog",{attrs:{width:"550px","not-center":""},scopedSlots:t._u([{key:"header",fn:function(){return[e("h4",{staticClass:"not-margin"},[e("b",[t._v("Delete Content?")])])]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"con-footer"},[e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.deleteContent()}}},[t._v("\n                    Delete\n                ")]),t._v(" "),e("button",{staticClass:"btn btn-light",on:{click:function(e){t.deleteContentDialog=!1}}},[t._v("\n                    Cancel\n                ")])])]},proxy:!0}]),model:{value:t.deleteContentDialog,callback:function(e){t.deleteContentDialog=e},expression:"deleteContentDialog"}},[t._v(" "),e("div",{staticClass:"con-content"},[e("p",[t._v("Are you sure you want to delete this content? This action cannot be undone.")])])])],1)}),[function(){var t=this._self._c;return t("li",{staticClass:"breadcrumb-item"},[t("a",{staticClass:"text-white",attrs:{href:"/categories"}},[t("i",{staticClass:"fas fa-home"}),this._v(" Categories\n                                    ")])])},function(){var t=this._self._c;return t("div",{staticClass:"card-header border-0"},[t("div",{staticClass:"row align-items-center"},[t("div",{staticClass:"col"},[t("h3",{staticClass:"mb-0"},[this._v("Category Contents")])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center text-white"},[e("i",{staticClass:"fas fa-play-circle fa-3x mb-2"}),t._v(" "),e("p",{staticClass:"mb-0"},[t._v("Video Content")])])}],!1,null,null,null).exports},5768:(t,e,a)=>{a.d(e,{A:()=>s});var n=a(6798),o=a.n(n)()((function(t){return t[1]}));o.push([t.id,".breadcrumb-dark .breadcrumb-item+.breadcrumb-item:before{color:hsla(0,0%,100%,.6)}.breadcrumb-dark .breadcrumb-item a{color:hsla(0,0%,100%,.8);text-decoration:none}.breadcrumb-dark .breadcrumb-item a:hover{color:#fff}.card-img-top{border-top-left-radius:calc(.375rem - 1px);border-top-right-radius:calc(.375rem - 1px)}.avatar-lg{border:3px solid hsla(0,0%,100%,.2)}.btn i:not(:last-child),.btn svg:not(:last-child){margin-right:5px}",""]);const s=o}}]);