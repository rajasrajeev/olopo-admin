"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[875],{3470:(t,a,e)=>{e.d(a,{A:()=>i});var o=e(6798),s=e.n(o)()((function(t){return t[1]}));s.push([t.id,".btn i:not(:last-child),.btn svg:not(:last-child){margin-right:5px}.avatar{border:2px solid #fff;box-shadow:0 2px 4px rgba(0,0,0,.1)}.table td{vertical-align:middle}",""]);const i=s},5875:(t,a,e)=>{e.r(a),e.d(a,{default:()=>l});const o={name:"Categories",data:function(){return{categories:[],addCategoryData:{name:"",description:"",icon_image:null},editCategoryData:{id:null,name:"",description:"",icon_image:null},deleteCategoryData:{id:null},addCategoryModal:!1,editCategoryModal:!1,deleteDialog:!1,dataNotFound:!1}},methods:{getCategories:function(){var t=this,a=this.block("categoriesLoading");this.axios.get("/api/v1/categories").then((function(e){t.categories=e.data.data,t.dataNotFound=0===t.categories.length,a.close()})).catch((function(e){var o,s;t.categories=[],t.dataNotFound=!0,console.log(null===(o=e.response)||void 0===o?void 0:o.data),t.errorNotification((null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)||"Failed to load categories"),a.close()}))},addCategory:function(){var t=this,a=this.block("addCategoryForm"),e=new FormData;e.append("name",this.addCategoryData.name),e.append("description",this.addCategoryData.description),this.addCategoryData.icon_image&&e.append("icon_image",this.addCategoryData.icon_image),this.axios.post("/api/v1/add/category",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){!0===e.data.status?(t.$refs.resetForm.reset(),t.addCategoryData={name:"",description:"",icon_image:null},t.addCategoryModal=!1,t.successNotification(e.data.message),t.getCategories()):t.errorNotification(e.data.message),a.close()})).catch((function(e){var o;t.errorNotification((null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)||"Failed to add category"),a.close()}))},updateCategory:function(){var t=this,a=this.block("editCategoryForm"),e=new FormData;e.append("id",this.editCategoryData.id),e.append("name",this.editCategoryData.name),e.append("description",this.editCategoryData.description),this.editCategoryData.icon_image&&e.append("icon_image",this.editCategoryData.icon_image),this.axios.post("/api/v1/update/category",e,{headers:{"Content-Type":"multipart/form-data","X-HTTP-Method-Override":"PUT"}}).then((function(e){t.editCategoryModal=!1,t.successNotification(e.data.message),t.getCategories(),a.close()})).catch((function(e){var o;t.errorNotification((null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)||"Failed to update category"),a.close()}))},deleteCategory:function(){var t=this,a=this.block("deleteLoading");this.axios.delete("/api/v1/delete/category/"+this.deleteCategoryData.id).then((function(e){!0===e.data.status?(t.deleteDialog=!1,t.successNotification(e.data.message),t.getCategories()):t.errorNotification(e.data.message),a.close()})).catch((function(e){var o;t.deleteDialog=!1,t.errorNotification((null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)||"Failed to delete category"),a.close()}))},editBtn:function(t){var a=this;this.editCategoryData.id=t,this.editCategoryModal=!0,this.axios.get("/api/v1/category/"+t).then((function(t){var e=t.data.data;a.editCategoryData.name=e.name,a.editCategoryData.description=e.description})).catch((function(t){a.errorNotification("Failed to load category details")}))},deleteBtn:function(t){this.deleteDialog=!0,this.deleteCategoryData.id=t},viewCategory:function(t){window.location.href="/categories/".concat(t,"/detail")},handleIconUpload:function(t){var a=t.target.files[0];a&&(this.addCategoryData.icon_image=a)},handleEditIconUpload:function(t){var a=t.target.files[0];a&&(this.editCategoryData.icon_image=a)},formatDate:function(t){var a=new Date(t);return a.toLocaleDateString()+" "+a.toLocaleTimeString()}},mounted:function(){this.getCategories()}};var s=e(5072),i=e.n(s),r=e(3470),n={insert:"head",singleton:!1};i()(r.A,n);r.A.locals;const l=(0,e(4486).A)(o,(function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"header bg-primary pb-6"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"header-body"},[a("div",{staticClass:"row align-items-center py-4"},[t._m(0),t._v(" "),a("div",{staticClass:"col-lg-6 col-5 text-right"},[a("a",{staticClass:"btn btn-sm btn-neutral",attrs:{href:"#"},on:{click:function(a){t.addCategoryModal=!t.addCategoryModal}}},[t._v("New Category")])])])])])]),t._v(" "),a("div",{staticClass:"container-fluid mt--6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card",attrs:{id:"deleteLoading"}},[t._m(1),t._v(" "),a("div",{staticClass:"table-responsive",attrs:{id:"categoriesLoading"}},[a("table",{staticClass:"table align-items-center table-flush"},[t._m(2),t._v(" "),t._l(t.categories,(function(e,o){return a("tbody",{key:e.id,staticClass:"list"},[a("tr",[a("td",[t._v(t._s(o+1))]),t._v(" "),a("td",[a("div",{staticClass:"avatar-group"},[a("img",{staticClass:"avatar avatar-sm rounded-circle",staticStyle:{width:"40px",height:"40px","object-fit":"cover"},attrs:{src:e.icon_image,alt:e.name}})])]),t._v(" "),a("th",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body"},[a("span",{staticClass:"name mb-0 text-sm font-weight-bold"},[t._v(t._s(e.name))])])])]),t._v(" "),a("td",[a("span",{staticClass:"text-sm"},[t._v(t._s(e.description||"No description"))])]),t._v(" "),a("td",[a("span",{staticClass:"badge badge-primary"},[t._v(t._s(e.contents_count)+" items")])]),t._v(" "),a("td",[a("span",{staticClass:"text-sm"},[t._v(t._s(t.formatDate(e.created_at)))])]),t._v(" "),a("td",[a("div",{staticStyle:{display:"inline-flex"}},[a("button",{staticClass:"btn btn-info btn-sm mr-2",on:{click:function(a){return t.viewCategory(e.id)}}},[a("i",{staticClass:"fas fa-eye"}),t._v(" "),t._m(3,!0)]),t._v(" "),a("button",{staticClass:"btn btn-primary btn-sm mr-2",on:{click:function(a){return t.editBtn(e.id)}}},[a("i",{staticClass:"far fa-edit"}),t._v(" "),t._m(4,!0)]),t._v(" "),a("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(a){return t.deleteBtn(e.id)}}},[a("i",{staticClass:"fas fa-trash-alt"}),t._v(" "),t._m(5,!0)])])])])])})),t._v(" "),t.dataNotFound?a("tbody",[t._m(6)]):t._e()],2)])])])])]),t._v(" "),a("vs-dialog",{attrs:{"prevent-close":"",blur:""},scopedSlots:t._u([{key:"header",fn:function(){return[a("h4",{staticClass:"not-margin"},[t._v("\n                Add New "),a("b",[t._v("Category")])])]},proxy:!0}]),model:{value:t.addCategoryModal,callback:function(a){t.addCategoryModal=a},expression:"addCategoryModal"}},[t._v(" "),a("form",{ref:"resetForm",attrs:{id:"addCategoryForm"},on:{submit:function(a){return a.preventDefault(),t.addCategory()}}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label"},[t._v("Category Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addCategoryData.name,expression:"addCategoryData.name"}],staticClass:"form-control",attrs:{placeholder:"Category Name",required:""},domProps:{value:t.addCategoryData.name},on:{input:function(a){a.target.composing||t.$set(t.addCategoryData,"name",a.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group mt--3"},[a("label",{staticClass:"form-control-label"},[t._v("Description")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.addCategoryData.description,expression:"addCategoryData.description"}],staticClass:"form-control",attrs:{placeholder:"Category Description",rows:"3"},domProps:{value:t.addCategoryData.description},on:{input:function(a){a.target.composing||t.$set(t.addCategoryData,"description",a.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group mt--3"},[a("label",{staticClass:"form-control-label"},[t._v("Icon Image")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"file",accept:"image/*"},on:{change:t.handleIconUpload}}),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("Supported formats: JPG, PNG, GIF (Max: 2MB)")])]),t._v(" "),a("div",{staticClass:"footer-dialog text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Add Category")])])])]),t._v(" "),a("vs-dialog",{attrs:{"prevent-close":"",blur:""},scopedSlots:t._u([{key:"header",fn:function(){return[a("h4",{staticClass:"not-margin"},[t._v("\n                Edit "),a("b",[t._v("Category")])])]},proxy:!0}]),model:{value:t.editCategoryModal,callback:function(a){t.editCategoryModal=a},expression:"editCategoryModal"}},[t._v(" "),a("form",{attrs:{id:"editCategoryForm"},on:{submit:function(a){return a.preventDefault(),t.updateCategory()}}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label"},[t._v("Category Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editCategoryData.name,expression:"editCategoryData.name"}],staticClass:"form-control",attrs:{placeholder:"Category Name",required:""},domProps:{value:t.editCategoryData.name},on:{input:function(a){a.target.composing||t.$set(t.editCategoryData,"name",a.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group mt--3"},[a("label",{staticClass:"form-control-label"},[t._v("Description")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editCategoryData.description,expression:"editCategoryData.description"}],staticClass:"form-control",attrs:{placeholder:"Category Description",rows:"3"},domProps:{value:t.editCategoryData.description},on:{input:function(a){a.target.composing||t.$set(t.editCategoryData,"description",a.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group mt--3"},[a("label",{staticClass:"form-control-label"},[t._v("Icon Image")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"file",accept:"image/*"},on:{change:t.handleEditIconUpload}}),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("Leave empty to keep current icon")])]),t._v(" "),a("div",{staticClass:"footer-dialog text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Update Category")])])])]),t._v(" "),a("vs-dialog",{attrs:{width:"550px","not-center":""},scopedSlots:t._u([{key:"header",fn:function(){return[a("h4",{staticClass:"not-margin"},[a("b",[t._v("Are you sure?")])])]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"con-footer"},[a("button",{staticClass:"btn btn-danger",on:{click:function(a){return t.deleteCategory()}}},[t._v("\n                    Delete\n                ")]),t._v(" "),a("button",{staticClass:"btn btn-light",on:{click:function(a){t.deleteDialog=!1}}},[t._v("\n                    Cancel\n                ")])])]},proxy:!0}]),model:{value:t.deleteDialog,callback:function(a){t.deleteDialog=a},expression:"deleteDialog"}},[t._v(" "),a("div",{staticClass:"con-content"},[a("p",[t._v("Are you sure you want to delete this category? This action cannot be undone and will also delete all associated content.")])])])],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"col-lg-6 col-7"},[t("h6",{staticClass:"h2 text-white d-inline-block mb-0"},[this._v("Categories")])])},function(){var t=this._self._c;return t("div",{staticClass:"card-header border-0"},[t("div",{staticClass:"row align-items-center"},[t("div",{staticClass:"col"},[t("h3",{staticClass:"mb-0"},[this._v("Categories List")])])])])},function(){var t=this,a=t._self._c;return a("thead",{staticClass:"thead-light"},[a("tr",[a("th",{staticClass:"sort",attrs:{scope:"col"}},[t._v("#")]),t._v(" "),a("th",{staticClass:"sort",attrs:{scope:"col"}},[t._v("Icon")]),t._v(" "),a("th",{staticClass:"sort",attrs:{scope:"col"}},[t._v("Category Name")]),t._v(" "),a("th",{staticClass:"sort",attrs:{scope:"col"}},[t._v("Description")]),t._v(" "),a("th",{staticClass:"sort",attrs:{scope:"col"}},[t._v("Contents")]),t._v(" "),a("th",{staticClass:"sort",attrs:{scope:"col"}},[t._v("Created At")]),t._v(" "),a("th",{staticClass:"sort",attrs:{scope:"col"}},[t._v("Action")])])])},function(){var t=this._self._c;return t("span",[t("strong",[this._v("View")])])},function(){var t=this._self._c;return t("span",[t("strong",[this._v("Edit")])])},function(){var t=this._self._c;return t("span",[t("strong",[this._v("Delete")])])},function(){var t=this._self._c;return t("tr",{staticClass:"text-center"},[t("td",{attrs:{colspan:"7"}},[this._v("No Categories Found")])])}],!1,null,null,null).exports}}]);